const d=document.querySelector(".js_characterUl"),L=document.querySelector(".js_favouriteCharacterUl"),j=document.querySelector(".js_btnSearch"),b=document.querySelector(".js_inputSearch"),n=document.querySelector(".js_characterNotFound"),u=document.querySelector(".js_deleteAllFavouritesBtn"),p=document.querySelector(".js_descriptionTextFavourites"),y=document.querySelector(".js_imageStitchFavourites"),h=document.querySelector(".js_favouritesCounter");let s=[],r=[];const I=e=>e||"https://placehold.co/400x400/ffffff/555555?text=Disney",m=(e,a=!1)=>{const o=I(e.imageUrl),t=r.findIndex(F=>F._id===e._id)!==-1,i=t?"favourite":"",v=t?"fa-solid":"fa-regular",_=t?"heartClicked":"character__heart",g=a?"":`<img class="character__img" src="${o}" alt="Imagen de ${e.name}">`,S=a?"charactersFavouriteSection__card":"allCharactersSection__card",C=a?'<i class="fa-solid fa-trash js_trash"></i>':"";return`<li class="js_characterCard ${S} ${i}" id="${e._id}">
        <div> ${g} </div>
        <p class="character__name">${e.name}</p>
        <i class="${v} fa-heart js_characterHeart ${_}"></i>
        ${C}

    </li>`},c=()=>{let e="";s=Array.isArray(s)?s:[s];for(const o of s)e+=m(o,!1);d.innerHTML=e;const a=document.querySelectorAll(".js_characterCard");for(const o of a)o.addEventListener("click",k)},l=()=>{let e="";for(const a of r)e+=m(a,!0);L.innerHTML=e,r.length===0?(p.style.display="block",y.style.display="block",h.style.display="none"):(p.style.display="none",y.style.display="none",h.style.display="block"),h.innerHTML=`<i class="fa-solid fa-heart charactersFavouriteSection__counterheart" style="color: red;"></i> Total de favoritos: ${r.length}`},f=()=>{r.length>0?u.style.display="block":u.style.display="none"},k=e=>{const a=parseInt(e.currentTarget.id),o=s.find(i=>i._id===a),t=r.findIndex(i=>i._id===a);t===-1?r.push(o):r.splice(t,1),l(),c(),f(),localStorage.setItem("charactersFavs",JSON.stringify(r))},$=e=>{e.preventDefault(),n.style.display="none",n.innerHTML="";const a=b.value.toLocaleLowerCase();if(a===""){fetch("https://api.disneyapi.dev/character?pageSize=50").then(t=>t.json()).then(t=>{s=t.data,l(),c()});return}const o=`https://api.disneyapi.dev/character?pageSize=50&name=${encodeURIComponent(a)}`;fetch(o).then(t=>t.json()).then(t=>{if(t.info.count===0){s=[],l(),c(),n.innerHTML=`<p>Lo sentimos, ese personaje no se encuentra en nuestra base de datos. Prueba con otro personaje.</p>
                <img src="../images/Alicia llorando character not found.gif" alt="Personaje no encontrado. 
                Gif de Alicia en el país de las maravillas llorando">`,n.style.display="block",n.classList.add("searchSection__characterNotFound"),d.classList.add("hidden");return}d.classList.remove("hidden"),s=t.data,l(),c()}).catch(t=>{console.error("Error",t),n.textContent="Lo sentimos, hubo un problema con la búsqueda",n.style.display="block",d.style.display="none"})},q=()=>{console.log("Borrar todos los favoritos"),r=[],l(),c(),localStorage.removeItem("charactersFavs"),f()};j.addEventListener("click",$);u.addEventListener("click",q);fetch("https://api.disneyapi.dev/character?pageSize=50").then(e=>e.json()).then(e=>{s=e.data,c()});localStorage.getItem("charactersFavs")!==null&&(r=JSON.parse(localStorage.getItem("charactersFavs")),l(),f());
//# sourceMappingURL=main.js.map
